@* TableSourceContext.razor *@
@using System.Data

<CascadingValue Value="_context">
    @ChildContent
</CascadingValue>

@code {

    [Parameter] public RenderFragment ChildContent { get; set; } = default!;

    private Dictionary<string, DataTable> _dataSources = new Dictionary<string, DataTable>();
    private TableSourceContext _context = default!;

    protected override void OnParametersSet()
    {
        _context = this;
        Console.WriteLine("TableSourceContext OnParametersSetAsync");
        base.OnParametersSet();    
    }

    public void RegisterDataSource(string name, DataTable dataTable)
    {
        dataTable.TableName = name;
        _dataSources[name] = dataTable;
    }

    public DataTable? GetDataSource(string name)
    {
        _dataSources.TryGetValue(name, out var dataTable);
        return dataTable;
    }
}
