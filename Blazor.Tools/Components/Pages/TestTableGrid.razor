@page "/test-table-grid"
@rendermode InteractiveServer
@using Blazor.Tools.Components.AI
@using Blazor.Tools.Components.TableGrid
@using System.Data
@inject NavigationManager Navigation

<PageTitle>Test Table Grid</PageTitle>

<h1>Testing Sample Table Grid Component</h1> 

 <TableGrid Title="Employee Table">
    <TableSource Name="EmployeeDS" DataSource="@_employees" />
    <TableSource Name="CountryDS" DataSource="@_countries" />
    <TableNode Title="AccSol Table" DataSource="EmployeeDS">
        <TableColumn DataSourceName="EmployeeDS" FieldName="ID" Type="TextBox" />
        <TableColumn DataSourceName="EmployeeDS" FieldName="FirstName" Type="TextBox" HeaderName="First Name" />
        <TableColumn DataSourceName="EmployeeDS" FieldName="MiddleName" Type="TextBox" HeaderName="Middle Name" />
        <TableColumn DataSourceName="EmployeeDS" FieldName="LastName" Type="TextBox" HeaderName="Last Name" />
        <TableColumn DataSourceName="CountryDS" FieldName="CountryID" Type="DropdownList" DisplayFieldName="Name" DisplayFieldValue="ID" HeaderName="Country" />
    </TableNode>
</TableGrid>
 
@code {

    private DataTable _employees = default!;
    private DataTable _countries = default!;
    protected override void OnParametersSet()
    {
        Console.WriteLine("TestTableGrid OnParametersSetAsync");
        // Initialize _employees DataTable
        _employees = new DataTable();
        _employees.Columns.Add("ID", typeof(int));
        _employees.Columns.Add("FirstName", typeof(string));
        _employees.Columns.Add("MiddleName", typeof(string));
        _employees.Columns.Add("LastName", typeof(string));
        _employees.Columns.Add("CountryID", typeof(int));
        _employees.Rows.Add(1, "John", "A.", "Doe", 1);
        _employees.Rows.Add(2, "Jane", "B.", "Smith", 2);

        // Initialize _countries DataTable
        _countries = new DataTable();
        _countries.Columns.Add("ID", typeof(int));
        _countries.Columns.Add("Name", typeof(string));
        _countries.Rows.Add(1, "USA");
        _countries.Rows.Add(2, "Canada");

    }
}
