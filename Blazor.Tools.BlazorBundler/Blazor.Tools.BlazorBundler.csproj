<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <Version>3.0.8</Version>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <GeneratePackageOnBuild>True</GeneratePackageOnBuild>
    <Title>Blazor Bundler</Title>
    <Authors>$(AssemblyName), Solomio Sisante</Authors>
    <Description>A Blazor package that bundles bootstraps and Icons</Description>
    <Copyright>2024</Copyright>
    <PackageId>Blazor.Tools.BlazorBundler</PackageId>
    <PackageIcon>icon.png</PackageIcon>
    <PackageProjectUrl>https://github.com/xmione/Blazor.Tools/tree/master/Blazor.Tools.BlazorBundler</PackageProjectUrl>
    <RepositoryUrl>https://github.com/xmione/Blazor.Tools.git</RepositoryUrl>
    <PackageLicenseExpression>MIT</PackageLicenseExpression>
    <PackageRequireLicenseAcceptance>True</PackageRequireLicenseAcceptance>
    <PackageReadmeFile>README.md</PackageReadmeFile>
    <EnforceCodeStyleInBuild>True</EnforceCodeStyleInBuild>
    <IncludeSymbols>False</IncludeSymbols>
  </PropertyGroup>

  <ItemGroup>
    <!-- None items in the root -->
    <None Include="changelog_*.md;icon.png;README.md;readme.txt">
      <Pack>True</Pack>
      <PackagePath>\</PackagePath>
    </None>
    
    <!-- None item for MSBuild targets file -->
    <None Include="build\Blazor.Tools.BlazorBundler.targets">
      <Pack>True</Pack>
      <PackagePath>\build\</PackagePath>
    </None>
    
    <!-- None items in the packages folder -->
    <None Include="packages/*.nupkg">
      <Pack>True</Pack>
      <PackagePath>\packages\</PackagePath>
    </None>
    
    <!-- None items in the tools folder -->
    <None Include=" tools/install-nupkg.ps1">
      <Pack>True</Pack>
      <PackagePath>\tools\</PackagePath>
    </None>
    
    <!-- Add Get-Tools.ps1 -->
    <None Include="tools\Get-Tools.ps1">
      <Pack>True</Pack>
      <PackagePath>\tools\</PackagePath>
    </None>
    
    <!-- Add Install-Pkgs.psm1 -->
    <None Include="tools\Install-Pkgs.psm1">
      <Pack>True</Pack>
      <PackagePath>\tools\</PackagePath>
    </None>
    
    <!-- Add Print-Folder-Structure.psm1 -->
    <None Include="tools\Print-Folder-Structure.psm1">
      <Pack>True</Pack>
      <PackagePath>\tools\</PackagePath>
    </None>
    
    <!-- Add Uninstall-Pkgs.psm1 -->
    <None Include="tools\Uninstall-Pkgs.psm1">
      <Pack>True</Pack>
      <PackagePath>\tools\</PackagePath>
    </None>
    <!-- Add blazor-bootstrap files -->
    <Content Include="wwwroot\bundler\blazor-bootstrap\blazor.bootstrap.*">
      <Pack>true</Pack>
      <PackagePath>\wwwroot\bundler\blazor-bootstrap\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\AI\AIChatBot.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
    </Content>
    <Content Include="Components\AI\SentimentAnalysis.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
    </Content>
    <Content Include="Components\DataTableGrid\DataTableGrid.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\DataTableGrid\SearchFieldsEntryModal.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\DTSearchBox\DTSearchBox.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\TableGrid\AddRowModal.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\TableGrid\TableColumn.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\TableGrid\TableGrid.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\TableGrid\TableNode.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>
    <Content Include="Components\TableGrid\TableSource.razor">
      <ExcludeFromSingleFile>true</ExcludeFromSingleFile>
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Content>

    <!-- Add blazored-typeahead files -->
    <Content Include="wwwroot\bundler\blazored-typeahead\blazored-typeahead.js">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\blazored-typeahead\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    
    <!-- Add bootstrap-icons files --> 
    <Content Include="wwwroot\bundler\bootstrap-icons\**\*">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\bootstrap-icons\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>

    <!-- Add the bundler.css file-->
    <Content Include="wwwroot\bundler\css\bundler.css">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\css\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    <!-- Add files in the js folder-->
    <Content Include="wwwroot\bundler\js\*.js">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\js\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    
    <RazorComponent Include="Components\**\*.razor" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="Components\AI\AIChatBot.razor" />
    <None Remove="Components\AI\SentimentAnalysis.razor" />
  </ItemGroup>

  <ItemGroup>
    <RazorComponent Remove="Components\AI\AIChatBot.razor" />
    <RazorComponent Remove="Components\AI\SentimentAnalysis.razor" />
    <RazorComponent Remove="Components\DataTableGrid\SetTargetTableModal.razor" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="Blazor.Bootstrap" Version="1.11.1" />
    <PackageReference Include="Dapper" Version="2.1.35" />
    <PackageReference Include="HtmlAgilityPack" Version="1.11.61" />
    <PackageReference Include="Microsoft.AspNetCore.Components" Version="6.0.26" />
    <PackageReference Include="Microsoft.Build" Version="17.10.4" />
    <PackageReference Include="Microsoft.Data.SqlClient" Version="5.2.1" />
    <PackageReference Include="Microsoft.ML" Version="3.0.1" />
    <PackageReference Include="Newtonsoft.Json" Version="13.0.3" />
  </ItemGroup>

  <ItemGroup>
    <Compile Update="Entities\SearchField.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Entities\CheckOnFieldValueEnum.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Entities\DataTableJsonConverter.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Interfaces\ITargetTable.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Interfaces\ITargetTableColumn.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Entities\RenderFragmentExtensions.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Entities\TableEnum.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Entities\TargetTable.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Entities\TargetTableColumn.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
    <Compile Update="Entities\TargetTableColumnConverter.cs">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <None Update="Components\TableGrid\TableGrid.razor.css">
      <CopyToOutputDirectory>Never</CopyToOutputDirectory>
      <CssScope>custom-scope-identifier</CssScope>
    </None>
  </ItemGroup>
 
  <Target Name="CustomPack" AfterTargets="Build">
    <Exec Command="dotnet pack --configuration Release /p:NoDefaultExcludes=true" />
  </Target>
</Project>
