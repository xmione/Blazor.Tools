<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <Version>3.0.5</Version>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <GeneratePackageOnBuild>True</GeneratePackageOnBuild>
    <Title>Blazor Bundler</Title>
    <Authors>$(AssemblyName), Solomio Sisante</Authors>
    <Description>A Blazor package that bundles bootstraps and Icons</Description>
    <Copyright>2024</Copyright>
    <PackageId>Blazor.Tools.BlazorBundler</PackageId>
    <PackageIcon>icon.png</PackageIcon>
    <PackageProjectUrl>https://github.com/xmione/Blazor.Tools/tree/master/Blazor.Tools.BlazorBundler</PackageProjectUrl>
    <RepositoryUrl>https://github.com/xmione/Blazor.Tools.git</RepositoryUrl>
    <PackageLicenseExpression>MIT</PackageLicenseExpression>
    <PackageRequireLicenseAcceptance>True</PackageRequireLicenseAcceptance>
    <PackageReadmeFile>README.md</PackageReadmeFile>
    <EnforceCodeStyleInBuild>True</EnforceCodeStyleInBuild>
    <IncludeSymbols>False</IncludeSymbols>
  </PropertyGroup>

  <ItemGroup>
    <!-- None items in the root -->
    <None Include="changelog_*.md;readme.txt;icon.png">
      <Pack>True</Pack>
      <PackagePath>\</PackagePath>
    </None>

    <!-- Add README.md -->
    <None Include="README.md">
      <Pack>True</Pack>
      <PackagePath>\</PackagePath>
    </None>
    
    <!-- None item for MSBuild targets file -->
    <None Include="build\Blazor.Tools.BlazorBundler.targets">
      <Pack>True</Pack>
      <PackagePath>\build\</PackagePath>
    </None>

    <!-- None items in the packages folder -->
    <None Include="packages/*.nupkg">
      <Pack>True</Pack>
      <PackagePath>\packages\</PackagePath>
    </None>
    
    <!-- None items in the tools folder -->
    <None Include="tools/Install.ps1; tools/install-nupkg.ps1">
      <Pack>True</Pack>
      <PackagePath>\tools\</PackagePath>
    </None>
    
    <!-- Add Uninstall.ps1 -->
    <Content Include="tools/Uninstall.ps1">
      <Pack>True</Pack>
      <PackagePath>\tools\</PackagePath>
    </Content>
    
    <!-- Add blazor-bootstrap files -->
    <Content Include="wwwroot\bundler\blazor-bootstrap\blazor.bootstrap.*">
      <Pack>true</Pack>
      <PackagePath>\wwwroot\bundler\blazor-bootstrap\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>

    <!-- Add blazored-typeahead files -->
    <Content Include="wwwroot\bundler\blazored-typeahead\blazored-typeahead.js">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\blazored-typeahead\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
    
    <!-- Add bootstrap-icons files -->
    <Content Include="wwwroot\bundler\bootstrap-icons\**\*">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\bootstrap-icons\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>

    <!-- Add the bundler.css file-->
    <Content Include="wwwroot\bundler\css\bundler.css">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\css\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>

    <!-- Add files in the js folder-->
    <Content Include="wwwroot\bundler\js\*.js">
      <Pack>True</Pack>
      <PackagePath>\wwwroot\bundler\js\</PackagePath>
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
  </ItemGroup>
  <Target Name="CustomPack" AfterTargets="Build">
    <Exec Command="dotnet pack --configuration Release /p:NoDefaultExcludes=true" />
  </Target>
</Project>
